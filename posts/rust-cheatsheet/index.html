<!doctype html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Rust Cheatsheet" /><meta property="og:locale" content="en" /><meta name="description" content="In this post we’ll look at some useful snippets and examples when programming in Rust." /><meta property="og:description" content="In this post we’ll look at some useful snippets and examples when programming in Rust." /><link rel="canonical" href="/posts/rust-cheatsheet/" /><meta property="og:url" content="/posts/rust-cheatsheet/" /><meta property="og:site_name" content="Node Security" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-04-13T20:26:13+10:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Rust Cheatsheet" /><meta name="twitter:site" content="@todo" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-04-13T21:29:14+10:00","datePublished":"2024-04-13T20:26:13+10:00","description":"In this post we’ll look at some useful snippets and examples when programming in Rust.","headline":"Rust Cheatsheet","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/rust-cheatsheet/"},"url":"/posts/rust-cheatsheet/"}</script><title>Rust Cheatsheet | Node Security</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Node Security"><meta name="application-name" content="Node Security"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="/assets/icon.webp" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">Node Security</a></div><div class="site-subtitle fst-italic">Security & Programming Guides</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tools/" class="nav-link"> <i class="fa-fw fas fa-tools"></i> <span>TOOLS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/O1dMate" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/todo" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['o1dmate','protonmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Rust Cheatsheet</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </span> <span id="search-cancel">Cancel</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>Rust Cheatsheet</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1713003973" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 13, 2024 </em> </span> <span> Updated <em class="" data-ts="1713007754" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 13, 2024 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/todo">Alexander Wells</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3036 words" > <em>16 min</em> read</span></div></div></div><div class="post-content"><p>In this post we’ll look at some useful snippets and examples when programming in <a href="https://www.rust-lang.org/">Rust</a>.</p><ol><li><a href="#create-a-new-project">Create a New Project</a><ul><li><a href="#create-a-new-folder-for-project">Create a New Folder for Project</a><li><a href="#create-a-new-project-in-current-directory">Create a New Project in Current Directory</a></ul><li><a href="#program-execution">Program Execution</a><ul><li><a href="#compile--check-program">Compile &amp; Check Program</a><li><a href="#run-program-dev">Run Program (Dev)</a><li><a href="#run-program-release">Run Program (Release)</a><li><a href="#clean-builds">Clean Builds</a><li><a href="#check-dependency-sizes">Check Dependency Sizes</a><li><a href="#profiles">Profiles</a></ul><li><a href="#ownership--borrowing">Ownership &amp; Borrowing</a><ul><li><a href="#ownership--borrowing---example-1">Ownership &amp; Borrowing - Example 1</a><li><a href="#ownership--borrowing---example-2">Ownership &amp; Borrowing - Example 2</a><li><a href="#ownership--borrowing---example-3">Ownership &amp; Borrowing - Example 3</a></ul><li><a href="#files">Files</a><ul><li><a href="#importing--exporting">Importing &amp; Exporting</a><li><a href="#reading-a-file-to-a-string">Reading a File to a String</a><li><a href="#reading-a-file-to-a-buffer">Reading a File to a Buffer</a><li><a href="#writing-a-string-to-a-file">Writing a String to a File</a><li><a href="#writing-a-buffer-to-a-file">Writing a Buffer to a File</a><li><a href="#append-to-file">Append to File</a><li><a href="#parsing-a-stringfile-to-json">Parsing a String/File to JSON</a><li><a href="#writing-jsonstruct-to-a-file">Writing JSON/Struct to a File</a></ul><li><a href="#zero-cost-abstractions">Zero Cost Abstractions</a><ul><li><a href="#iterators">Iterators</a><li><a href="#enum-pattern-matching">Enum Pattern Matching</a></ul><li><a href="#option--result">Option &amp; Result</a><ul><li><a href="#option">Option</a><li><a href="#result">Result</a><li><a href="#more-optionresult-examples">More Option/Result Examples</a></ul><li><a href="#working-with-structs">Working with Structs</a><ul><li><a href="#defining-a-struct">Defining a Struct</a><li><a href="#struct-methods">Struct Methods</a><li><a href="#searching-a-vector-of-structs">Searching a Vector of Structs</a><li><a href="#sorting-a-vector-of-structs">Sorting a Vector of Structs</a><li><a href="#mutation-issues">Mutation Issues</a></ul><li><a href="#random-numbers">Random Numbers</a><li><a href="#code-timing">Code Timing</a></ol><p><br /></p><h1 id="create-a-new-project">Create a New Project</h1><h3 id="create-a-new-folder-for-project"><span class="me-2">Create a New Folder for Project</span><a href="#create-a-new-folder-for-project" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>cargo new [project_name]
</pre></table></code></div></div><h3 id="create-a-new-project-in-current-directory"><span class="me-2">Create a New Project in Current Directory</span><a href="#create-a-new-project-in-current-directory" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>cargo init
</pre></table></code></div></div><p><br /></p><h1 id="program-execution">Program Execution</h1><h3 id="compile--check-program"><span class="me-2">Compile &amp; Check Program</span><a href="#compile--check-program" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Compile ONLY</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>cargo check
</pre></table></code></div></div><h3 id="run-program-dev"><span class="me-2">Run Program (Dev)</span><a href="#run-program-dev" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Compile &amp; Run</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>cargo run
</pre></table></code></div></div><h3 id="run-program-release"><span class="me-2">Run Program (Release)</span><a href="#run-program-release" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Compile &amp; Run</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>cargo run --release
</pre></table></code></div></div><h3 id="clean-builds"><span class="me-2">Clean Builds</span><a href="#clean-builds" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Removes all existing Dev &amp; Release builds. <code class="language-plaintext highlighter-rouge">target</code> folder will be deleted. All dependencies will be recompiled upon next build.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>cargo clean
</pre></table></code></div></div><h3 id="check-dependency-sizes"><span class="me-2">Check Dependency Sizes</span><a href="#check-dependency-sizes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><code class="language-plaintext highlighter-rouge">strip = true</code> must <strong>NOT</strong> be present in the profile section of the <code class="language-plaintext highlighter-rouge">Cargo.toml</code> file for this to work.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>cargo install cargo-bloat --no-default-features
</pre></table></code></div></div><p>Then run one of the following:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>cargo bloat --crates
cargo bloat --release --crates
</pre></table></code></div></div><h3 id="profiles"><span class="me-2">Profiles</span><a href="#profiles" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>See <a href="https://doc.rust-lang.org/cargo/reference/profiles.html">Rust docs</a> for full documentation.</p><p>You can specify profile settings in <code class="language-plaintext highlighter-rouge">Cargo.toml</code>. These settings will be used during compilation.</p><ul><li><code class="language-plaintext highlighter-rouge">cargo run/build</code> uses <code class="language-plaintext highlighter-rouge">dev</code><li><code class="language-plaintext highlighter-rouge">cargo run/build --release</code> uses <code class="language-plaintext highlighter-rouge">release</code></ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>[profile.dev]
opt-level = 0

[profile.release]
opt-level = 3
strip = true
lto = true
codegen-units = 1
</pre></table></code></div></div><p><br /></p><h1 id="ownership--borrowing">Ownership &amp; Borrowing</h1><p><strong>Ownership Rules:</strong></p><ol><li>Each value has an <em>owner</em> and only <em>one owner</em>.<li>When the <em>owner</em> goes out of scope, the value is dropped.</ol><p><strong>Borrowing Rules:</strong></p><ol><li>At any given time, you can have either one mutable reference or any number of mutable references.<li>References must always be valid.</ol><h3 id="ownership--borrowing---example-1"><span class="me-2">Ownership &amp; Borrowing - Example 1</span><a href="#ownership--borrowing---example-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Take the below code, it looks simple. Create a vector, then call a function that takes in vector twice.</p><p>However, this <strong>ISN’T</strong> valid and the compiler throws an error on <code class="language-plaintext highlighter-rouge">line 5</code>:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>use of moved value: `my_numbers`
value used here after move
</pre></table></code></div></div><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">my_numbers</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">456</span><span class="p">];</span>

    <span class="nf">print_data</span><span class="p">(</span><span class="n">my_numbers</span><span class="p">);</span>
    <span class="nf">print_data</span><span class="p">(</span><span class="n">my_numbers</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">print_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Here’s what’s happening. When <code class="language-plaintext highlighter-rouge">print_data</code> is called the first time, the variable <code class="language-plaintext highlighter-rouge">my_number</code> is being moved inside that function. The <code class="language-plaintext highlighter-rouge">data</code> variable inside the function is now the new owner. When the function finishes the variable <code class="language-plaintext highlighter-rouge">data</code> is no longer in scope. Therefore, the data associated with it (our vector) will be cleaned up. This is fine, but it means when the function is done <code class="language-plaintext highlighter-rouge">my_numbers</code> doesn’t exist anymore because it’s no longer the owner. When we try and use the variable again, we get an error.</p><p>To fix this we need to <code class="language-plaintext highlighter-rouge">borrow</code> the value, instead of taking ownership of it. Here’s how to do that:</p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">my_numbers</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">456</span><span class="p">];</span>

    <span class="nf">print_data</span><span class="p">(</span><span class="o">&amp;</span><span class="n">my_numbers</span><span class="p">);</span>
    <span class="nf">print_data</span><span class="p">(</span><span class="o">&amp;</span><span class="n">my_numbers</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">print_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>Notice the function parameter has been updated to now accept a reference, and we’re now passing a reference in the function calls on <code class="language-plaintext highlighter-rouge">line 4</code> and <code class="language-plaintext highlighter-rouge">line 5</code>.</ul><h3 id="ownership--borrowing---example-2"><span class="me-2">Ownership &amp; Borrowing - Example 2</span><a href="#ownership--borrowing---example-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If we want to borrow the value and also have it be mutable, then we need to use a mutable reference with <code class="language-plaintext highlighter-rouge">&amp;mut</code>.</p><p>We can see below how to pass a mutable reference to a function.</p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">my_numbers</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">456</span><span class="p">];</span>

    <span class="nf">update_data</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">my_numbers</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">);</span>
    <span class="nf">update_data</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">my_numbers</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
    
    <span class="nd">println!</span><span class="p">(</span><span class="s">"Data: {:?}"</span><span class="p">,</span> <span class="n">my_numbers</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">update_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">value_to_add</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">data</span><span class="nf">.push</span><span class="p">(</span><span class="n">value_to_add</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p><br /></p><h3 id="ownership--borrowing---example-3"><span class="me-2">Ownership &amp; Borrowing - Example 3</span><a href="#ownership--borrowing---example-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>We create a variable <code class="language-plaintext highlighter-rouge">borrow</code>, then inside a new scope block we create a vector of numbers <code class="language-plaintext highlighter-rouge">my_numbers</code> and try and save a reference to it in the <code class="language-plaintext highlighter-rouge">borrow</code> variable. Once outside the scope block we try and use <code class="language-plaintext highlighter-rouge">borrow</code>.</p><p>Checking the compiler we get the error:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>`my_numbers` does not live long enough
borrowed value does not live long enough
</pre></table></code></div></div><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">borrow</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="p">{</span>
        <span class="k">let</span> <span class="n">my_numbers</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">456</span><span class="p">];</span>
        <span class="n">borrow</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">my_numbers</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span> <span class="n">borrow</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>If this code were allowed then we would have a <a href="https://en.wikipedia.org/wiki/Dangling_pointer">dangling reference</a>. When the inner scope block ends, the variable <code class="language-plaintext highlighter-rouge">my_numbers</code> is dropped and all references to it are invalid. This breaks the 2nd rule above for borrowing which states that references must always be valid. Therefore, the code is not valid.</p><p><br /></p><h1 id="files">Files</h1><h3 id="importing--exporting"><span class="me-2">Importing &amp; Exporting</span><a href="#importing--exporting" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>File - example.rs</strong></p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">pub</span> <span class="k">fn</span> <span class="nf">test_function</span><span class="p">()</span> <span class="p">{</span>

<span class="p">}</span>
</pre></table></code></div></div><p><strong>File - main.rs</strong></p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">mod</span> <span class="n">example</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nn">example</span><span class="p">::</span><span class="nf">test_function</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="reading-a-file-to-a-string"><span class="me-2">Reading a File to a String</span><a href="#reading-a-file-to-a-string" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">path</span> <span class="o">=</span> <span class="s">"file.txt"</span><span class="p">;</span>

    <span class="k">match</span> <span class="nn">fs</span><span class="p">::</span><span class="nf">read_to_string</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">Ok</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">{</span>
            <span class="nd">println!</span><span class="p">(</span><span class="s">"File Contents: {}"</span><span class="p">,</span> <span class="n">contents</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nf">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">{</span>
            <span class="nd">println!</span><span class="p">(</span><span class="s">"Failed to read file: {}"</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="reading-a-file-to-a-buffer"><span class="me-2">Reading a File to a Buffer</span><a href="#reading-a-file-to-a-buffer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>This shows how to read the raw contents of a file into a <code class="language-plaintext highlighter-rouge">Vec&lt;u8&gt;</code> (Buffer):</p><p><strong>Short Version</strong></p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">path</span> <span class="o">=</span> <span class="s">"file.txt"</span><span class="p">;</span>
    
    <span class="k">match</span> <span class="nn">fs</span><span class="p">::</span><span class="nf">read</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">Ok</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">{</span>
            <span class="nd">println!</span><span class="p">(</span><span class="s">"RAW File Contents: {:?}"</span><span class="p">,</span> <span class="n">contents</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nf">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">{</span>
            <span class="nd">println!</span><span class="p">(</span><span class="s">"Failed to Read File: {}"</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p><strong>Long Version</strong></p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">Read</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">path</span> <span class="o">=</span> <span class="s">"file.txt"</span><span class="p">;</span>
    
    <span class="k">if</span> <span class="k">let</span> <span class="nf">Ok</span><span class="p">(</span><span class="n">file_data</span><span class="p">)</span> <span class="o">=</span> <span class="nf">read_file</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">)</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"RAW File Contents: {:?}"</span><span class="p">,</span> <span class="n">file_data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"Failed to Read File"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">Result</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">u8</span><span class="o">&gt;</span><span class="p">,</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">file_contents</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">u8</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nn">Vec</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">file_obj</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

    <span class="n">file_obj</span><span class="nf">.read_to_end</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">file_contents</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

    <span class="k">return</span> <span class="nf">Ok</span><span class="p">(</span><span class="n">file_contents</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="writing-a-string-to-a-file"><span class="me-2">Writing a String to a File</span><a href="#writing-a-string-to-a-file" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Short Version</strong></p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">file_name</span> <span class="o">=</span> <span class="s">"file.txt"</span><span class="p">;</span>
    <span class="k">let</span> <span class="n">data</span> <span class="o">=</span> <span class="s">"some data to write to a file"</span><span class="p">;</span>
    
    <span class="k">match</span> <span class="nn">fs</span><span class="p">::</span><span class="nf">write</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">Ok</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">{</span>
            <span class="nd">println!</span><span class="p">(</span><span class="s">"File write successful"</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nf">Err</span><span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">{</span>
            <span class="nd">println!</span><span class="p">(</span><span class="s">"Failed to write file: {}"</span><span class="p">,</span> <span class="n">err</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p><strong>Long Version</strong></p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::{</span><span class="k">self</span><span class="p">,</span> <span class="n">Write</span><span class="p">};</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">_</span> <span class="o">=</span> <span class="nf">write_file</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">write_file</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Result</span><span class="o">&lt;</span><span class="nb">bool</span><span class="p">,</span> <span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">file_name</span> <span class="o">=</span> <span class="s">"file.txt"</span><span class="p">;</span>
    <span class="k">let</span> <span class="n">data</span> <span class="o">=</span> <span class="s">"some data to write to a file"</span><span class="p">;</span>

    <span class="k">let</span> <span class="k">mut</span> <span class="n">file</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">create</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
    <span class="n">file</span><span class="nf">.write_all</span><span class="p">(</span><span class="n">data</span><span class="nf">.as_bytes</span><span class="p">())</span><span class="o">?</span><span class="p">;</span>

    <span class="k">return</span> <span class="nf">Ok</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="writing-a-buffer-to-a-file"><span class="me-2">Writing a Buffer to a File</span><a href="#writing-a-buffer-to-a-file" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>How to write a <code class="language-plaintext highlighter-rouge">Vec&lt;u8&gt;</code> of data to a file:</p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::{</span><span class="k">self</span><span class="p">,</span> <span class="n">Write</span><span class="p">};</span>

<span class="k">fn</span> <span class="nf">write_file</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Result</span><span class="o">&lt;</span><span class="nb">bool</span><span class="p">,</span> <span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">file_name</span> <span class="o">=</span> <span class="s">"file.txt"</span><span class="p">;</span>
    <span class="k">let</span> <span class="n">data</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">u8</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">];</span>

    <span class="k">let</span> <span class="k">mut</span> <span class="n">file</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">create</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
    <span class="n">file</span><span class="nf">.write_all</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

    <span class="k">return</span> <span class="nf">Ok</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">fs::write(file_name, data)</code> can also be used as shorthand.</ul><h3 id="append-to-file"><span class="me-2">Append to File</span><a href="#append-to-file" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">OpenOptions</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::{</span><span class="k">self</span><span class="p">,</span> <span class="n">Write</span><span class="p">};</span>

<span class="k">fn</span> <span class="nf">write_file</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Result</span><span class="o">&lt;</span><span class="nb">bool</span><span class="p">,</span> <span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">file_name</span> <span class="o">=</span> <span class="s">"file.txt"</span><span class="p">;</span>
    <span class="k">let</span> <span class="n">data</span> <span class="o">=</span> <span class="s">"some data to write to a file</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="k">let</span> <span class="k">mut</span> <span class="n">file</span> <span class="o">=</span> <span class="nn">OpenOptions</span><span class="p">::</span><span class="nf">new</span><span class="p">()</span><span class="nf">.create</span><span class="p">(</span><span class="k">true</span><span class="p">)</span><span class="nf">.append</span><span class="p">(</span><span class="k">true</span><span class="p">)</span><span class="nf">.open</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
    <span class="n">file</span><span class="nf">.write_all</span><span class="p">(</span><span class="n">data</span><span class="nf">.as_bytes</span><span class="p">())</span><span class="o">?</span><span class="p">;</span>

    <span class="k">return</span> <span class="nf">Ok</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">.create(true)</code> means that the file will be created if it doesn’t already exist. If this isn’t present, and the file doesn’t exist, an Error will be thrown.</ul><h3 id="parsing-a-stringfile-to-json"><span class="me-2">Parsing a String/File to JSON</span><a href="#parsing-a-stringfile-to-json" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>[dependencies]
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
</pre></table></code></div></div><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">serde</span><span class="p">::</span><span class="n">Deserialize</span><span class="p">;</span>

<span class="nd">#[derive(Debug,</span> <span class="nd">Deserialize)]</span>
<span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="n">countries_visited</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">read_data_from_json</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Result</span><span class="o">&lt;</span><span class="n">Person</span><span class="p">,</span> <span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">json_bytes</span> <span class="o">=</span> <span class="nn">fs</span><span class="p">::</span><span class="nf">read</span><span class="p">(</span><span class="s">"file.txt"</span><span class="p">)</span><span class="nf">.unwrap_or</span><span class="p">(</span><span class="nd">vec!</span><span class="p">[]);</span>
    <span class="k">let</span> <span class="n">json_string</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from_utf8</span><span class="p">(</span><span class="n">json_bytes</span><span class="p">)</span><span class="nf">.unwrap_or</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">""</span><span class="p">));</span>

    <span class="k">return</span> <span class="k">match</span> <span class="nn">serde_json</span><span class="p">::</span><span class="nn">from_str</span><span class="p">::</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">json_string</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">Ok</span><span class="p">(</span><span class="n">person</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nf">Ok</span><span class="p">(</span><span class="n">person</span><span class="p">),</span>
        <span class="nf">Err</span><span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nf">Err</span><span class="p">(</span><span class="n">err</span><span class="nf">.to_string</span><span class="p">()),</span>
    <span class="p">}</span>
<span class="p">}</span>   

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nf">Ok</span><span class="p">(</span><span class="n">person</span><span class="p">)</span> <span class="o">=</span> <span class="nf">read_data_from_json</span><span class="p">()</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span> <span class="n">person</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>Person { name: "Jeff", age: 20, countries_visited: ["Australia"] }
</pre></table></code></div></div><h3 id="writing-jsonstruct-to-a-file"><span class="me-2">Writing JSON/Struct to a File</span><a href="#writing-jsonstruct-to-a-file" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>[dependencies]
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
</pre></table></code></div></div><p>Note <code class="language-plaintext highlighter-rouge">serde_json::to_string_pretty</code> can be used instead of <code class="language-plaintext highlighter-rouge">serde_json::to_string</code> to format the JSON in a readable way.</p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">serde</span><span class="p">::</span><span class="n">Serialize</span><span class="p">;</span>

<span class="nd">#[derive(Debug,</span> <span class="nd">Serialize)]</span>
<span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="n">countries_visited</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">write_data_to_json</span><span class="p">(</span><span class="n">person</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">Person</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">Result</span><span class="o">&lt;</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">json_string</span> <span class="o">=</span> <span class="nn">serde_json</span><span class="p">::</span><span class="nf">to_string</span><span class="p">(</span><span class="o">&amp;</span><span class="n">person</span><span class="p">);</span>

    <span class="k">if</span> <span class="n">json_string</span><span class="nf">.is_err</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">Err</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Failed to convert to JSON string"</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="k">let</span> <span class="nf">Err</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="nn">fs</span><span class="p">::</span><span class="nf">write</span><span class="p">(</span><span class="s">"file.json"</span><span class="p">,</span> <span class="n">json_string</span><span class="nf">.unwrap</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">Err</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Failed to write JSON string to File"</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nf">Ok</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">person1</span> <span class="o">=</span> <span class="n">Person</span> <span class="p">{</span>
        <span class="n">name</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Jeff"</span><span class="p">),</span>
        <span class="n">age</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">countries_visited</span><span class="p">:</span> <span class="nd">vec!</span><span class="p">[</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Australia"</span><span class="p">)],</span>
    <span class="p">};</span>

    <span class="k">let</span> <span class="n">_</span> <span class="o">=</span> <span class="nf">write_data_to_json</span><span class="p">(</span><span class="o">&amp;</span><span class="n">person1</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p><br /></p><h1 id="zero-cost-abstractions">Zero Cost Abstractions</h1><ol><li>What you don’t use, you don’t pay for.<li>What you do use, you couldn’t hand code any better.</ol><p><strong>Examples:</strong></p><ul><li>Iterators<li>Pattern Matching from Enums</ul><h3 id="iterators"><span class="me-2">Iterators</span><a href="#iterators" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">numbers</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
    <span class="k">let</span> <span class="n">sum</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="n">numbers</span><span class="nf">.iter</span><span class="p">()</span><span class="nf">.sum</span><span class="p">();</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"Sum: {}"</span><span class="p">,</span> <span class="n">sum</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>The use of <code class="language-plaintext highlighter-rouge">.iter().sum()</code> is as efficient as manually iterating over the vector and summing the numbers because Rust’s iterator abstractions are optimized away.</p><h3 id="enum-pattern-matching"><span class="me-2">Enum Pattern Matching</span><a href="#enum-pattern-matching" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>You can use pattern matching for enums to decide what happens if a variable is each variant.</p><ul><li>You can use <code class="language-plaintext highlighter-rouge">_</code> as a handler for the <code class="language-plaintext highlighter-rouge">else</code> case if you don’t care about the remaining variants.<li>You <strong>MUST</strong> handle every variant. This is enforced by the compiler.</ul><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="k">enum</span> <span class="n">Permissions</span> <span class="p">{</span>
    <span class="n">Read</span><span class="p">,</span>
    <span class="n">Create</span><span class="p">,</span>
    <span class="n">Update</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">value</span> <span class="o">=</span> <span class="nn">Permissions</span><span class="p">::</span><span class="n">Update</span><span class="p">;</span>

    <span class="k">match</span> <span class="n">value</span> <span class="p">{</span>
        <span class="nn">Permissions</span><span class="p">::</span><span class="n">Read</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"READ Permission"</span><span class="p">),</span>
        <span class="nn">Permissions</span><span class="p">::</span><span class="n">Create</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"CREATE Permission"</span><span class="p">),</span>
        <span class="nn">Permissions</span><span class="p">::</span><span class="n">Update</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"UPDATE Permission"</span><span class="p">),</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>UPDATE Permission
</pre></table></code></div></div><p>If an additional variant is added to the enum definition and you don’t update any other code, you will get a compiler error.</p><ul><li>If you are using <code class="language-plaintext highlighter-rouge">_</code> in the pattern match, then you <strong>WON’T</strong> get a compiler warning, as this will handle the newly added variant!</ul><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">enum</span> <span class="n">Permissions</span> <span class="p">{</span>
    <span class="n">Read</span><span class="p">,</span>
    <span class="n">Create</span><span class="p">,</span>
    <span class="n">Update</span><span class="p">,</span>
    <span class="n">Delete</span><span class="p">,</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">Delete</code> variant added.</ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>error[E0004]: non-exhaustive patterns: `Permissions::Delete` not covered
  --&gt; src\main.rs:11:11
   |
11 |     match value {
   |           ^^^^^ pattern `Permissions::Delete` not covered
   |
note: `Permissions` defined here
  --&gt; src\main.rs:1:6
   |
1  | enum Permissions {
   |      ^^^^^^^^^^^
...
5  |     Delete,
   |     ------ not covered
   = note: the matched value is of type `Permissions`
help: ensure that all possible cases are being handled by adding a match arm with a wildcard pattern or an explicit pattern as shown
   |
14 ~         Permissions::Update =&gt; println!("UPDATE Permission"),
15 ~         Permissions::Delete =&gt; todo!(),
</pre></table></code></div></div><p><br /></p><h1 id="option--result">Option &amp; Result</h1><h3 id="option"><span class="me-2">Option</span><a href="#option" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Option Example - Pattern Matching</strong></p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="k">fn</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">param</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">param</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">Some</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">param</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">Some</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nb">None</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">..</span><span class="mi">3</span> <span class="p">{</span>
        <span class="k">match</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">Some</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"Result: {}"</span><span class="p">,</span> <span class="n">result</span><span class="p">),</span>
            <span class="nb">None</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"No Result!"</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Result: false
Result: true
No Result!
</pre></table></code></div></div><h3 id="result"><span class="me-2">Result</span><a href="#result" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Result Example - Pattern Matching</strong></p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="k">fn</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">Result</span><span class="o">&lt;</span><span class="nb">i32</span><span class="p">,</span> <span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">Err</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"0 is not valid input!"</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nf">Ok</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">a</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">..</span><span class="mi">3</span> <span class="p">{</span>
        <span class="k">match</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">Ok</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"Result: {}"</span><span class="p">,</span> <span class="n">result</span><span class="p">),</span>
            <span class="nf">Err</span><span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"Error: {}"</span><span class="p">,</span> <span class="n">err</span><span class="p">),</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Error: 0 is not valid input!
Result: 5
Result: 10
</pre></table></code></div></div><h3 id="more-optionresult-examples"><span class="me-2">More Option/Result Examples</span><a href="#more-optionresult-examples" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Example - unwrap_or</strong></p><ul><li>Using <code class="language-plaintext highlighter-rouge">unwrap_or</code> gets the value out of <code class="language-plaintext highlighter-rouge">Some</code> variant, or if it’s the <code class="language-plaintext highlighter-rouge">None</code> variant the value provided will be used.<li>Using <code class="language-plaintext highlighter-rouge">unwrap_or</code> gets the value out of <code class="language-plaintext highlighter-rouge">Ok</code> variant, or if it’s the <code class="language-plaintext highlighter-rouge">Err</code> variant the value provided will be used.</ul><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">..</span><span class="mi">3</span> <span class="p">{</span>
        <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="nf">.unwrap_or</span><span class="p">(</span><span class="k">false</span><span class="p">);</span> <span class="c1">// my_function returns Option&lt;bool&gt;</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"Result: {}"</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Result: false
Result: true
Result: false
</pre></table></code></div></div><p><strong>Example - unwrap</strong></p><ul><li>Using <code class="language-plaintext highlighter-rouge">unwrap</code> gets the value out of the <code class="language-plaintext highlighter-rouge">Some</code> variant. If it’s the <code class="language-plaintext highlighter-rouge">None</code> variant, the program will panic.<li>Using <code class="language-plaintext highlighter-rouge">unwrap</code> gets the value out of the <code class="language-plaintext highlighter-rouge">Ok</code> variant. If it’s the <code class="language-plaintext highlighter-rouge">Err</code> variant, the program will panic.</ul><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">..</span><span class="mi">3</span> <span class="p">{</span>
        <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="nf">.unwrap</span><span class="p">();</span> <span class="c1">// my_function returns Option&lt;bool&gt;</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"Result: {}"</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>Result: false
Result: true
thread 'main' panicked at src\main.rs:13:37:
called `Option::unwrap()` on a `None` value
</pre></table></code></div></div><p><strong>Example - if let</strong></p><ul><li>Using <code class="language-plaintext highlighter-rouge">if let</code> allows you to conditionally access a specific variant.</ul><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="k">fn</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">Result</span><span class="o">&lt;</span><span class="nb">i32</span><span class="p">,</span> <span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">Err</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"0 is not valid input!"</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nf">Ok</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">a</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">..</span><span class="mi">3</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nf">Ok</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">=</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="nd">println!</span><span class="p">(</span><span class="s">"Result: {}"</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Result: 5
Result: 10
</pre></table></code></div></div><p><br /></p><h1 id="working-with-structs">Working with Structs</h1><h3 id="defining-a-struct"><span class="me-2">Defining a Struct</span><a href="#defining-a-struct" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nd">#[derive(Debug)]</span>
<span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">first_name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="n">last_name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="struct-methods"><span class="me-2">Struct Methods</span><a href="#struct-methods" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="k">impl</span> <span class="n">Person</span> <span class="p">{</span>
	<span class="c1">// Not required, but can be added</span>
	<span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="k">Self</span> <span class="p">{</span>
		<span class="n">Person</span> <span class="p">{</span>
			<span class="n">first_name</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"John"</span><span class="p">),</span>
			<span class="n">last_name</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Smith"</span><span class="p">),</span>
			<span class="n">age</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span>
		<span class="p">}</span>
	<span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">update_first_name</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">,</span> <span class="n">new_first_name</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.first_name</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="n">new_first_name</span><span class="p">);</span>
    <span class="p">}</span>

	<span class="k">pub</span> <span class="k">fn</span> <span class="nf">print_summary</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span>
		<span class="nd">println!</span><span class="p">(</span><span class="s">"First Name: {}"</span><span class="p">,</span> <span class="k">self</span><span class="py">.first_name</span><span class="p">);</span>
		<span class="nd">println!</span><span class="p">(</span><span class="s">"Last Name: {}"</span><span class="p">,</span> <span class="k">self</span><span class="py">.last_name</span><span class="p">);</span>
		<span class="nd">println!</span><span class="p">(</span><span class="s">"Age: {}"</span><span class="p">,</span> <span class="k">self</span><span class="py">.age</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">let</span> <span class="k">mut</span> <span class="n">person</span> <span class="o">=</span> <span class="nn">Person</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="n">person</span><span class="nf">.update_first_name</span><span class="p">(</span><span class="s">"Jack"</span><span class="p">);</span>
<span class="n">person</span><span class="nf">.print_summary</span><span class="p">();</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>First Name: Jack
Last Name: Smith
Age: 18
</pre></table></code></div></div><h3 id="searching-a-vector-of-structs"><span class="me-2">Searching a Vector of Structs</span><a href="#searching-a-vector-of-structs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>We have a Vector of Person structs, and we want to find if <em>any</em> person is 25 and get the struct/object is so.</p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">let</span> <span class="k">mut</span> <span class="n">person_list</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[];</span> <span class="c1">// Assume this is populated</span>

<span class="k">match</span> <span class="n">person_list</span><span class="nf">.iter</span><span class="p">()</span><span class="nf">.find</span><span class="p">(|</span><span class="n">person</span><span class="p">|</span> <span class="n">person</span><span class="py">.age</span> <span class="o">==</span> <span class="mi">25</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">Some</span><span class="p">(</span><span class="n">person</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">{</span>
        <span class="c1">// Do something with the person that was found</span>
    <span class="p">},</span>
    <span class="nb">None</span> <span class="k">=&gt;</span> <span class="p">{</span>
        <span class="c1">// No Person was found</span>
    <span class="p">},</span>
<span class="p">};</span>
</pre></table></code></div></div><p>Some useful methods:</p><ul><li><code class="language-plaintext highlighter-rouge">position</code> returns <code class="language-plaintext highlighter-rouge">Option&lt;usize&gt;</code> for the index if a match in the Vector occured.<li><code class="language-plaintext highlighter-rouge">any</code> returns <code class="language-plaintext highlighter-rouge">bool</code> if a match in the Vector occured.<li><code class="language-plaintext highlighter-rouge">find</code> returns <code class="language-plaintext highlighter-rouge">Option&lt;Self::Item&gt;</code>, in this case <code class="language-plaintext highlighter-rouge">Option&lt;Person&gt;</code> for struct if a match in the Vector occured.</ul><h3 id="sorting-a-vector-of-structs"><span class="me-2">Sorting a Vector of Structs</span><a href="#sorting-a-vector-of-structs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>We have a Vector of Structs and we want to sort them in a specific way according to our own function. Example, sort <code class="language-plaintext highlighter-rouge">Vec&lt;Person&gt;</code> by their age:</p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">cmp</span><span class="p">::</span><span class="n">Ordering</span><span class="p">;</span>

<span class="n">person_list</span><span class="nf">.sort_by</span><span class="p">(|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">|</span> <span class="p">{</span>
    <span class="c1">// Sort by "age" field, Small -&gt; Big</span>
    <span class="k">if</span> <span class="n">a</span><span class="py">.age</span> <span class="o">&gt;</span> <span class="n">b</span><span class="py">.age</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nn">Ordering</span><span class="p">::</span><span class="n">Greater</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">a</span><span class="py">.age</span> <span class="o">==</span> <span class="n">b</span><span class="py">.age</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nn">Ordering</span><span class="p">::</span><span class="n">Equal</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nn">Ordering</span><span class="p">::</span><span class="n">Less</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></table></code></div></div><p>A similar result can be achieved with <code class="language-plaintext highlighter-rouge">sort_unstable_by_key</code>. However, it’s not as flexible.</p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">person_list</span><span class="nf">.sort_unstable_by_key</span><span class="p">(|</span><span class="n">person</span><span class="p">|</span> <span class="n">person</span><span class="py">.age</span><span class="p">);</span> <span class="c1">// Small -&gt; Big</span>
<span class="n">person_list</span><span class="nf">.sort_unstable_by_key</span><span class="p">(|</span><span class="n">person</span><span class="p">|</span> <span class="nn">u32</span><span class="p">::</span><span class="n">MAX</span> <span class="o">-</span> <span class="n">person</span><span class="py">.age</span><span class="p">);</span> <span class="c1">// Big -&gt; Small</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">sort_by_key</code> and <code class="language-plaintext highlighter-rouge">sort_by_cached_key</code> are also available depending on the your use case.</ul><h3 id="mutation-issues"><span class="me-2">Mutation Issues</span><a href="#mutation-issues" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If we modify the above example to use <code class="language-plaintext highlighter-rouge">find</code> instead of <code class="language-plaintext highlighter-rouge">position</code>, then inside of the <code class="language-plaintext highlighter-rouge">Some(person)</code> pattern we try and use our function <code class="language-plaintext highlighter-rouge">update_first_name</code>, it will fail.</p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">person</span><span class="nf">.update_first_name</span><span class="p">(</span><span class="s">"Steve"</span><span class="p">);</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>`person` is a `&amp;` reference, so the data it refers to cannot be borrowed as mutable
</pre></table></code></div></div><p>To fix this we need to use a mutable iterator:</p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">person_list</span><span class="nf">.iter_mut</span><span class="p">()</span>
</pre></table></code></div></div><p><br /></p><h1 id="random-numbers">Random Numbers</h1><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>[dependencies]
rand = "0.8"
</pre></table></code></div></div><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">rand</span><span class="p">::</span><span class="n">Rng</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">rng</span> <span class="o">=</span> <span class="nn">rand</span><span class="p">::</span><span class="nf">thread_rng</span><span class="p">();</span>

    <span class="k">let</span> <span class="n">small_number</span> <span class="o">=</span> <span class="n">rng</span><span class="py">.gen</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">u8</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="k">let</span> <span class="n">big_number</span> <span class="o">=</span> <span class="n">rng</span><span class="py">.gen</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">u128</span><span class="o">&gt;</span><span class="p">();</span>

    <span class="k">let</span> <span class="n">dice_roll_1</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="n">rng</span><span class="nf">.gen_range</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">7</span><span class="p">);</span> <span class="c1">// 1 to 6. 7 is NOT included</span>
    <span class="k">let</span> <span class="n">dice_roll_2</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="n">rng</span><span class="nf">.gen_range</span><span class="p">(</span><span class="mi">1</span><span class="o">..=</span><span class="mi">6</span><span class="p">);</span> <span class="c1">// 1 to 6. 6 is included</span>

    <span class="nd">println!</span><span class="p">(</span><span class="s">"Small (u8): {}"</span><span class="p">,</span> <span class="n">small_number</span><span class="p">);</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"Big (u128): {}"</span><span class="p">,</span> <span class="n">big_number</span><span class="p">);</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"Dice 1: {}"</span><span class="p">,</span> <span class="n">dice_roll_1</span><span class="p">);</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"Dice 2: {}"</span><span class="p">,</span> <span class="n">dice_roll_2</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>Small (u8): 191
Big (u128): 338387472999988388919276434146473488855
Dice 1: 1
Dice 2: 6
</pre></table></code></div></div><p>If you want to pass the <code class="language-plaintext highlighter-rouge">rng</code> to a function:</p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">rand</span><span class="p">::</span><span class="n">Rng</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">rand</span><span class="p">::</span><span class="nn">rngs</span><span class="p">::</span><span class="n">ThreadRng</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">rng</span> <span class="o">=</span> <span class="nn">rand</span><span class="p">::</span><span class="nf">thread_rng</span><span class="p">();</span>

    <span class="k">let</span> <span class="n">my_random_number</span> <span class="o">=</span> <span class="nf">get_random_number</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">rng</span><span class="p">);</span>

    <span class="nd">println!</span><span class="p">(</span><span class="s">"Number: {}"</span><span class="p">,</span> <span class="n">my_random_number</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">get_random_number</span><span class="p">(</span><span class="n">rng</span><span class="p">:</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="n">ThreadRng</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">rng</span><span class="nf">.gen</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>Number: 780483661
</pre></table></code></div></div><h1 id="code-timing">Code Timing</h1><p>You can use the below code when you want benchmark how long a certain piece of code is taking to execute. For more accurate results this does need to be done a lot of times.</p><ul><li>By default the results will be formatted nicely depending on the time taken (microseconds, milliseconds, seconds).</ul><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1">// Create the timer</span>
<span class="k">let</span> <span class="n">timer</span><span class="p">:</span> <span class="nn">std</span><span class="p">::</span><span class="nn">time</span><span class="p">::</span><span class="n">Instant</span> <span class="o">=</span> <span class="nn">std</span><span class="p">::</span><span class="nn">time</span><span class="p">::</span><span class="nn">Instant</span><span class="p">::</span><span class="nf">now</span><span class="p">();</span>

<span class="c1">// Stop the timer</span>
<span class="k">let</span> <span class="n">time_taken</span> <span class="o">=</span> <span class="n">timer</span><span class="nf">.elapsed</span><span class="p">();</span>

<span class="c1">// Print result</span>
<span class="nd">println!</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">Time Taken: {:?}"</span><span class="p">,</span> <span class="n">time_taken</span><span class="p">);</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/programming/'>programming</a>, <a href='/categories/rust/'>rust</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/programming/" class="post-tag no-text-decoration" >programming</a> <a href="/tags/rust/" class="post-tag no-text-decoration" >rust</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Rust%20Cheatsheet%20-%20Node%20Security&url=%2Fposts%2Frust-cheatsheet%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Rust%20Cheatsheet%20-%20Node%20Security&u=%2Fposts%2Frust-cheatsheet%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2Frust-cheatsheet%2F&text=Rust%20Cheatsheet%20-%20Node%20Security" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/rust-cheatsheet/">Rust Cheatsheet</a><li class="text-truncate lh-lg"> <a href="/posts/extract-ntlm-hashes-via-linux-live-boot/">Extract NTLM Hashes via Linux Live Boot</a><li class="text-truncate lh-lg"> <a href="/posts/admin-to-system-with-psexec/">Admin to SYSTEM with PsExec</a><li class="text-truncate lh-lg"> <a href="/posts/user-dumping-with-msol/">User Dumping with MSOL</a><li class="text-truncate lh-lg"> <a href="/posts/windows-uac-privilege-escalation/">Windows UAC Privilege Escalation</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/javascript/">javascript</a> <a class="post-tag btn btn-outline-primary" href="/tags/cryptography/">cryptography</a> <a class="post-tag btn btn-outline-primary" href="/tags/web/">web</a> <a class="post-tag btn btn-outline-primary" href="/tags/http/">http</a> <a class="post-tag btn btn-outline-primary" href="/tags/https/">https</a> <a class="post-tag btn btn-outline-primary" href="/tags/algorithm/">algorithm</a> <a class="post-tag btn btn-outline-primary" href="/tags/programming/">programming</a> <a class="post-tag btn btn-outline-primary" href="/tags/windows/">windows</a> <a class="post-tag btn btn-outline-primary" href="/tags/nodejs/">nodejs</a></div></div></div><div id="toc-wrapper" class="ps-0 pe-4 mb-5"><div class="panel-heading ps-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Further Reading</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/magic-number-perfect-hash-function/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1692094128" data-df="ll" > Aug 15, 2023 </em><h4 class="pt-0 my-2" data-toc-skip>Magic Number Perfect Hash Function</h4><div class="text-muted small"><p> In this post we’ll look at how to use magic numbers to create a perfect hash function for a set of Key Value pairs with Integer keys that is known a ahead of time. We’ll assume that we are using 6...</p></div></div></a></div><div class="col"> <a href="/posts/android-hooking-in-frida/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1635517141" data-df="ll" > Oct 30, 2021 </em><h4 class="pt-0 my-2" data-toc-skip>Android Hooking in Frida</h4><div class="text-muted small"><p> Intro guide on how to use Frida to hook Android applications at runtime to inject code and override methods. This guide already assumes you have frida installed and have frida-server installed on y...</p></div></div></a></div><div class="col"> <a href="/posts/frida-for-ios/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1642143158" data-df="ll" > Jan 14, 2022 </em><h4 class="pt-0 my-2" data-toc-skip>Frida for iOS</h4><div class="text-muted small"><p> Introductory guide on how to use Frida to analyse iOS applications at runtime to perform actions such as search for methods, hook methods, view &amp;amp; modify instructions, and view &amp;amp; modify regi...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/magic-number-perfect-hash-function/" class="btn btn-outline-primary" prompt="Older" ><p>Magic Number Perfect Hash Function</p></a> <a href="/posts/bloodhound-bulk-mark-as-owned/" class="btn btn-outline-primary" prompt="Newer" ><p>Bloodhound Bulk Mark as Owned</p></a></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/javascript/">javascript</a> <a class="post-tag btn btn-outline-primary" href="/tags/cryptography/">cryptography</a> <a class="post-tag btn btn-outline-primary" href="/tags/web/">web</a> <a class="post-tag btn btn-outline-primary" href="/tags/http/">http</a> <a class="post-tag btn btn-outline-primary" href="/tags/https/">https</a> <a class="post-tag btn btn-outline-primary" href="/tags/algorithm/">algorithm</a> <a class="post-tag btn btn-outline-primary" href="/tags/programming/">programming</a> <a class="post-tag btn btn-outline-primary" href="/tags/windows/">windows</a> <a class="post-tag btn btn-outline-primary" href="/tags/nodejs/">nodejs</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a></p><p>© 2024 <a href="https://twitter.com/todo">Alexander Wells</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p></div></div></footer><div id="mask"></div><button id="back-to-top" aria-label="back-to-top" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/en.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js,npm/tocbot@4.21.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
