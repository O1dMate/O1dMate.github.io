<!doctype html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="NodeJS Express HTTP Server" /><meta property="og:locale" content="en" /><meta name="description" content="In this post we’ll look at how to build a simple HTTP server in NodeJS using the express framework." /><meta property="og:description" content="In this post we’ll look at how to build a simple HTTP server in NodeJS using the express framework." /><link rel="canonical" href="/posts/express-http-server/" /><meta property="og:url" content="/posts/express-http-server/" /><meta property="og:site_name" content="Node Security" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-09T17:32:40+10:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="NodeJS Express HTTP Server" /><meta name="twitter:site" content="@todo" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-04-09T17:32:40+10:00","datePublished":"2021-04-09T17:32:40+10:00","description":"In this post we’ll look at how to build a simple HTTP server in NodeJS using the express framework.","headline":"NodeJS Express HTTP Server","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/express-http-server/"},"url":"/posts/express-http-server/"}</script><title>NodeJS Express HTTP Server | Node Security</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Node Security"><meta name="application-name" content="Node Security"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="/assets/icon.webp" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">Node Security</a></div><div class="site-subtitle fst-italic">Security & Programming Guides</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tools/" class="nav-link"> <i class="fa-fw fas fa-tools"></i> <span>TOOLS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/O1dMate" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/todo" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['o1dmate','protonmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>NodeJS Express HTTP Server</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </span> <span id="search-cancel">Cancel</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>NodeJS Express HTTP Server</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1617953560" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 9, 2021 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/todo">Alexander Wells</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1439 words" > <em>7 min</em> read</span></div></div></div><div class="post-content"><p>In this post we’ll look at how to build a simple HTTP server in NodeJS using the <a href="https://www.npmjs.com/package/express">express</a> framework.</p><ol><li><a href="#server-setup">Server Setup</a><ul><li><a href="#required-packages">Required Packages</a><li><a href="#basic-setup">Basic Setup</a></ul><li><a href="#express-basics">Express Basics</a><ul><li><a href="#routes">Routes</a><li><a href="#sending-back-data">Sending Back Data</a><li><a href="#response-codes">Response Codes</a><li><a href="#route-parameters">Route Parameters</a><li><a href="#query-parameters">Query Parameters</a><li><a href="#cookies">Cookies</a><li><a href="#json-body">JSON Body</a></ul><li><a href="#more-advanced-stuff">More Advanced Stuff</a><ul><li><a href="#custom-headers">Custom Headers</a><li><a href="#next-route">Next Route</a></ul></ol><h1 id="server-setup">Server Setup</h1><h2 id="required-packages"><span class="me-2">Required Packages</span><a href="#required-packages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>First step is to install the required npm packages:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm i express body-parser
</pre></table></code></div></div><h2 id="basic-setup"><span class="me-2">Basic Setup</span><a href="#basic-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Once the packages are installed, we can use the below code to import the packages and setup our first server:</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">body-parser</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Create new Express Server</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">).</span><span class="nc">Server</span><span class="p">(</span><span class="nx">app</span><span class="p">);</span>

<span class="c1">// Server Configuration</span>
<span class="kd">const</span> <span class="nx">PORT</span> <span class="o">=</span> <span class="mi">8080</span><span class="p">;</span>

<span class="c1">// Support JSON encoded POST request bodies</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nf">json</span><span class="p">());</span>

<span class="c1">// Start the Server</span>
<span class="nx">server</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`[-] Server Listening on Port </span><span class="p">${</span><span class="nx">PORT</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</pre></table></code></div></div><p>Nice, our server is now setup! But it’s not very useful as it doesn’t actually do anything. Let’s learn how to setup routes/endpoints so we can listen for request and send back data.</p><p><br /></p><h1 id="express-basics">Express Basics</h1><h2 id="routes"><span class="me-2">Routes</span><a href="#routes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Here is how we create a basic route:</p><ul><li>The first parameter is a string containing the route path (endpoint).<li>The second parameter is a callback that will be executed when a request is made to the route.</ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1">// GET Example</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">GET Hello!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// POST Example</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">POST Hello!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</pre></table></code></div></div><p>The functions names <code class="language-plaintext highlighter-rouge">get</code> &amp; <code class="language-plaintext highlighter-rouge">post</code> can be changed to any valid HTTP method (OPTIONS, PUT, DELETE, etc) in lowercase.</p><h2 id="sending-back-data"><span class="me-2">Sending Back Data</span><a href="#sending-back-data" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>When the callback function is executed, two parameters will be passed in for us to use. These are the <code class="language-plaintext highlighter-rouge">req</code> and <code class="language-plaintext highlighter-rouge">res</code> parameters short for request and response:</p><ul><li><code class="language-plaintext highlighter-rouge">req</code> contains information about the request such as headers and any data in the body that may have been sent.<li><code class="language-plaintext highlighter-rouge">res</code> is how we send data back to the client, using the the <code class="language-plaintext highlighter-rouge">send</code> and <code class="language-plaintext highlighter-rouge">sendFile</code> methods.</ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="c1">// The type will automatically be set as HTML if a string is provided.</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/home</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;h1&gt;Home&lt;/h1&gt;</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// The content-type will automatically be set as JSON if an object is provided.</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/json</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">({</span> <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="p">});</span>

<span class="c1">// You can also specify the type manually</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/text</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">type</span><span class="p">(</span><span class="dl">'</span><span class="s1">txt</span><span class="dl">'</span><span class="p">);</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;h1&gt;Home&lt;/h1&gt;</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Return a file from disk</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/home</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">sendFile</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">index.html</span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="response-codes"><span class="me-2">Response Codes</span><a href="#response-codes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>When data is sent back using the <code class="language-plaintext highlighter-rouge">send</code> or <code class="language-plaintext highlighter-rouge">sendFile</code> methods a response code of 200 is used. We can specify a custom code using the <code class="language-plaintext highlighter-rouge">status</code> and <code class="language-plaintext highlighter-rouge">sendStatus</code> methods:</p><ul><li>If you want to change the status code <strong>AND</strong> send data back in the body, use the <code class="language-plaintext highlighter-rouge">status</code> method.<li>If you only want to send a status code with no body, use the <code class="language-plaintext highlighter-rouge">sendStatus</code> method.</ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/json</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="c1">// Send custom HTTP Status code</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">status</span><span class="p">(</span><span class="mi">406</span><span class="p">).</span><span class="nf">send</span><span class="p">({</span> <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/admin</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="c1">// Send custom HTTP Status code</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">sendStatus</span><span class="p">(</span><span class="mi">404</span><span class="p">);</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="route-parameters"><span class="me-2">Route Parameters</span><a href="#route-parameters" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>We use Route Parameters as a placeholder variable for data that will be supplied by the user:</p><ul><li>If the client calls the API <code class="language-plaintext highlighter-rouge">/user/53</code>, we want to be able to access the value <code class="language-plaintext highlighter-rouge">53</code>.<li>We can do this by specifying a Route Parameter like this <code class="language-plaintext highlighter-rouge">/user/:userId</code>.<li>Route parameters are accessible using <code class="language-plaintext highlighter-rouge">req.params</code>. This returns an object of all the route parameters.<li>Using <code class="language-plaintext highlighter-rouge">req.params.userId</code> will return <code class="language-plaintext highlighter-rouge">53</code>.</ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="c1">// Route with a Route Parameter</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/user/:userId</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="c1">// For the URI: /user/53</span>
	<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">);</span> <span class="c1">// { userId: '53' };</span>
	<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">userId</span><span class="p">)</span>  <span class="c1">// '53'</span>

	<span class="nx">res</span><span class="p">.</span><span class="nf">sendStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Multiple Route Parameters</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/light/:lightbulbId/:action</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="c1">// For the URI: /light/17/off</span>
	<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">);</span> <span class="c1">// { lightbulbId: '17', action: 'off' };</span>
	<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Light </span><span class="p">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">lightbulbId</span><span class="p">}</span><span class="s2"> will be turned </span><span class="p">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">action</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>  <span class="c1">// 'Light 17 will be turned off'</span>

	<span class="nx">res</span><span class="p">.</span><span class="nf">sendStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="query-parameters"><span class="me-2">Query Parameters</span><a href="#query-parameters" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Query Parameters can be supplied by the client can be accessed using <code class="language-plaintext highlighter-rouge">req.query</code>. An object containing all the query parameters will be returned:</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1">// Query Parameters Example</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/search</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="c1">// For the URI: /search?firstName=John&amp;lastName=Smith</span>
	<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span> <span class="c1">// { firstName: 'John', lastName: 'Smith' }</span>

	<span class="c1">// Send custom HTTP Status code</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">sendStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="cookies"><span class="me-2">Cookies</span><a href="#cookies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>We can set a cookie in the response by using the <code class="language-plaintext highlighter-rouge">cookie</code> method:</p><ul><li>The first parameters is the cookie name <code class="language-plaintext highlighter-rouge">MyCookie</code>.<li>The second is the cookie value <code class="language-plaintext highlighter-rouge">abcdefghijklmnopqrstuvwxyz</code>.<li>The third is an object of cookie attributes.</ul><p>After using the <code class="language-plaintext highlighter-rouge">cookie</code> method, either <code class="language-plaintext highlighter-rouge">send</code> or <code class="language-plaintext highlighter-rouge">sendStatus</code> must be called as well to return the result.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/home</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">cookie</span><span class="p">(</span><span class="dl">'</span><span class="s1">MyCookie</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">abcdefghijklmnopqrstuvwxyz</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
		<span class="na">maxAge</span><span class="p">:</span> <span class="mi">3600000</span><span class="p">,</span> <span class="c1">// Time in milliseconds: 3600000 = 1 Hour</span>
		<span class="na">domain</span><span class="p">:</span> <span class="dl">'</span><span class="s1">localhost</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">path</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">secure</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> 
		<span class="na">httpOnly</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
		<span class="na">sameSite</span><span class="p">:</span> <span class="dl">'</span><span class="s1">strict</span><span class="dl">'</span>
	<span class="p">}).</span><span class="nf">send</span><span class="p">({</span> <span class="na">success</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="p">});</span>
</pre></table></code></div></div><p>Multiple cookies can be set by calling the <code class="language-plaintext highlighter-rouge">cookie</code> method multiple times.</p><h2 id="json-body"><span class="me-2">JSON Body</span><a href="#json-body" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If the client has sent us data in JSON format, here is how we can access that data from the request:</p><ul><li><code class="language-plaintext highlighter-rouge">req.body</code> will return the JSON data in the request body in the form of an object.<li><strong>NOTE 1</strong>: if <code class="language-plaintext highlighter-rouge">req.body</code> is <code class="language-plaintext highlighter-rouge">undefined</code>, ensure that you have <code class="language-plaintext highlighter-rouge">app.use(bodyParser.json());</code> in your code.<li><strong>NOTE 2</strong>: if <code class="language-plaintext highlighter-rouge">req.body</code> is an empty object, ensure that the <code class="language-plaintext highlighter-rouge">Content-Type</code> in the request header is <code class="language-plaintext highlighter-rouge">application/json</code>.</ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="c1">// Login API</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/login</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span> <span class="c1">// { username: 'John123', password: 'Password_ThatShouldNotBeGuessed641'}</span>

	<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">username</span><span class="p">);</span> <span class="c1">// 'John123'</span>
	<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span> <span class="c1">// 'Password_ThatShouldNotBeGuessed641'</span>

	<span class="kd">let</span> <span class="nx">loginSuccessful</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

	<span class="k">if </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">username</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">password</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">// Insert Authentication logic here</span>
		<span class="nx">loginSuccessful</span> <span class="o">=</span> <span class="nf">checkLogin</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">password</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">if </span><span class="p">(</span><span class="nx">loginSuccessful</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">// Login Successful, set a Cookie in the response</span>
		<span class="nx">res</span><span class="p">.</span><span class="nf">cookie</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth-token</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">kln450x02sl5gusnh3mpu0s7ca2jfsaf8h</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
			<span class="na">maxAge</span><span class="p">:</span> <span class="mi">3600000</span><span class="p">,</span> 	<span class="c1">// Time in milliseconds: 3600000 = 1 Hour</span>
			<span class="na">httpOnly</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
			<span class="na">sameSite</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lax</span><span class="dl">'</span>
		<span class="p">}).</span><span class="nf">send</span><span class="p">({</span> <span class="na">success</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="c1">// Login Failed</span>
		<span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">({</span> <span class="na">success</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
	<span class="p">}</span>
<span class="p">});</span>
</pre></table></code></div></div><p><br /></p><h1 id="more-advanced-stuff">More Advanced Stuff</h1><h2 id="custom-headers"><span class="me-2">Custom Headers</span><a href="#custom-headers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Custom response headers can be added using the <code class="language-plaintext highlighter-rouge">header</code> method to add controls such as CORS, HSTS, CSP, etc:</p><ul><li>The first parameter is the header name.<li>The second parameter is the header value.</ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/home</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">header</span><span class="p">(</span><span class="dl">'</span><span class="s1">Access-Control-Allow-Origin</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">http://127.0.0.1:8080</span><span class="dl">'</span><span class="p">);</span>

	<span class="nx">res</span><span class="p">.</span><span class="nf">sendFile</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">index.html</span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="next-route"><span class="me-2">Next Route</span><a href="#next-route" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>A common situation that can occur is when you need to do the same thing in multiple routes. An example of this might be adding a header, or checking if a user is authenticated.</p><p>Adding these headers/checks in every route is bad practice and can lead to security issues if you forget to add it in one of routes.</p><p>Luckily there is a better way:</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="c1">// Route 1</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">header</span><span class="p">(</span><span class="dl">'</span><span class="s1">Custom-Header</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">NodeJS Server</span><span class="dl">'</span><span class="p">);</span>
	<span class="nf">next</span><span class="p">();</span>
<span class="p">})</span>

<span class="c1">// Route 2</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/home</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">sendFile</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">index.html</span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// Route 3</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="c1">// Insert logic to check if the user's cookie is valid</span>
	<span class="kd">let</span> <span class="nx">authed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

	<span class="k">if </span><span class="p">(</span><span class="nx">authed</span><span class="p">)</span> <span class="p">{</span>
		<span class="nf">next</span><span class="p">();</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nx">res</span><span class="p">.</span><span class="nf">sendStatus</span><span class="p">(</span><span class="mi">404</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">})</span>

<span class="c1">// Route 4</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/authed/home</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">res</span><span class="p">.</span><span class="nf">sendFile</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">home.html</span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>
</pre></table></code></div></div><p>The <code class="language-plaintext highlighter-rouge">use</code> function matches every route, so putting a <code class="language-plaintext highlighter-rouge">app.use</code> before all other routes will ensure it gets called first.</p><p>When we request <code class="language-plaintext highlighter-rouge">/home</code> the following will happen:</p><ul><li>Route 1 is be matched, custom response header is be added, and the <code class="language-plaintext highlighter-rouge">next</code> function is called.<li>The <code class="language-plaintext highlighter-rouge">next</code> function means the route is finished doing what it needs to, but it doesn’t want to send a response. Express will continue checking for the next route that matches.<li>Route 2 is matched and returns <code class="language-plaintext highlighter-rouge">index.html</code>, completing the request.</ul><p>When we request <code class="language-plaintext highlighter-rouge">/authed/home</code> the following will happen:</p><ul><li>Route 1 is be matched, custom response header is be added, and the <code class="language-plaintext highlighter-rouge">next</code> function is called.<li>Route 2 is NOT matched.<li>Route 3 is matched. This route checks to see if the user authorized to view the subsequent pages. If yes, then <code class="language-plaintext highlighter-rouge">next</code> is called. If not, then a 404 is sent to the client.<li>If the user is authorised, then Route 4 is matched and returns <code class="language-plaintext highlighter-rouge">home.html</code>, completing the request.</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/javascript/'>javascript</a>, <a href='/categories/nodejs/'>nodejs</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/javascript/" class="post-tag no-text-decoration" >javascript</a> <a href="/tags/web/" class="post-tag no-text-decoration" >web</a> <a href="/tags/http/" class="post-tag no-text-decoration" >http</a> <a href="/tags/nodejs/" class="post-tag no-text-decoration" >nodejs</a> <a href="/tags/server/" class="post-tag no-text-decoration" >server</a> <a href="/tags/express/" class="post-tag no-text-decoration" >express</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=NodeJS%20Express%20HTTP%20Server%20-%20Node%20Security&url=%2Fposts%2Fexpress-http-server%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=NodeJS%20Express%20HTTP%20Server%20-%20Node%20Security&u=%2Fposts%2Fexpress-http-server%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2Fexpress-http-server%2F&text=NodeJS%20Express%20HTTP%20Server%20-%20Node%20Security" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/lsass-dumping/">LSASS Dumping</a><li class="text-truncate lh-lg"> <a href="/posts/proxmark3-card-reading-and-cloning/">Proxmark3 Card Reading and Cloning</a><li class="text-truncate lh-lg"> <a href="/posts/magic-number-perfect-hash-function/">Magic Number Perfect Hash Function</a><li class="text-truncate lh-lg"> <a href="/posts/getting-started-with-airmon-ng/">Getting Started with airmon-ng</a><li class="text-truncate lh-lg"> <a href="/posts/dump-sam-system-and-security/">Dump SAM, SYSTEM and SECURITY</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/javascript/">javascript</a> <a class="post-tag btn btn-outline-primary" href="/tags/cryptography/">cryptography</a> <a class="post-tag btn btn-outline-primary" href="/tags/web/">web</a> <a class="post-tag btn btn-outline-primary" href="/tags/http/">http</a> <a class="post-tag btn btn-outline-primary" href="/tags/https/">https</a> <a class="post-tag btn btn-outline-primary" href="/tags/algorithm/">algorithm</a> <a class="post-tag btn btn-outline-primary" href="/tags/nodejs/">nodejs</a> <a class="post-tag btn btn-outline-primary" href="/tags/programming/">programming</a> <a class="post-tag btn btn-outline-primary" href="/tags/windows/">windows</a></div></div></div><div id="toc-wrapper" class="ps-0 pe-4 mb-5"><div class="panel-heading ps-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Further Reading</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/express-https-server/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1618021807" data-df="ll" > Apr 10, 2021 </em><h4 class="pt-0 my-2" data-toc-skip>NodeJS Express HTTPS Server</h4><div class="text-muted small"><p> In this post we’ll look at how to add TLS to an NodeJS express HTTP server. This post will assume that you already know how to setup a HTTP server using express. If you don’t know how to, you can ...</p></div></div></a></div><div class="col"> <a href="/posts/express-sni/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1619859058" data-df="ll" > May 1, 2021 </em><h4 class="pt-0 my-2" data-toc-skip>NodeJS Express SNI</h4><div class="text-muted small"><p> In this post we’ll look at how to add SNI (Server Name Indication) to an express HTTPS server. This will allow us to return different certificates based on the domain (server name). This post will...</p></div></div></a></div><div class="col"> <a href="/posts/express-cert-based-mutual-auth/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1630963538" data-df="ll" > Sep 7, 2021 </em><h4 class="pt-0 my-2" data-toc-skip>NodeJS Express Cert Based Mutual Auth</h4><div class="text-muted small"><p> In this post we’ll look at how to add Certificate Based Mutual Authentication to an express HTTPS server. This will allow us to require a User Certificate before being able to communicate with out ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/javascript-fetch/" class="btn btn-outline-primary" prompt="Older" ><p>JavaScript Fetch</p></a> <a href="/posts/express-https-server/" class="btn btn-outline-primary" prompt="Newer" ><p>NodeJS Express HTTPS Server</p></a></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/javascript/">javascript</a> <a class="post-tag btn btn-outline-primary" href="/tags/cryptography/">cryptography</a> <a class="post-tag btn btn-outline-primary" href="/tags/web/">web</a> <a class="post-tag btn btn-outline-primary" href="/tags/http/">http</a> <a class="post-tag btn btn-outline-primary" href="/tags/https/">https</a> <a class="post-tag btn btn-outline-primary" href="/tags/algorithm/">algorithm</a> <a class="post-tag btn btn-outline-primary" href="/tags/nodejs/">nodejs</a> <a class="post-tag btn btn-outline-primary" href="/tags/programming/">programming</a> <a class="post-tag btn btn-outline-primary" href="/tags/windows/">windows</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a></p><p>© 2023 <a href="https://twitter.com/todo">Alexander Wells</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p></div></div></footer><div id="mask"></div><button id="back-to-top" aria-label="back-to-top" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/en.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js,npm/tocbot@4.21.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
