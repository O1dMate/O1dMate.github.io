<!DOCTYPE html><html lang="en-US" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Building a Plexus" /><meta property="og:locale" content="en_US" /><meta name="description" content="In this post we’ll look at how to build a Plexus in JavaScript using the p5.js library." /><meta property="og:description" content="In this post we’ll look at how to build a Plexus in JavaScript using the p5.js library." /><link rel="canonical" href="https://node-security.com/posts/building-a-plexus/" /><meta property="og:url" content="https://node-security.com/posts/building-a-plexus/" /><meta property="og:site_name" content="Node Security" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-16T23:53:16+11:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Building a Plexus" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="zCs6F-1y95azrfcOnbFvS60JAILGGXaeG4vY1-JFacs" /> <script type="application/ld+json"> {"url":"https://node-security.com/posts/building-a-plexus/","@type":"BlogPosting","headline":"Building a Plexus","dateModified":"2021-05-29T17:13:02+11:00","datePublished":"2021-04-16T23:53:16+11:00","description":"In this post we’ll look at how to build a Plexus in JavaScript using the p5.js library.","mainEntityOfPage":{"@type":"WebPage","@id":"https://node-security.com/posts/building-a-plexus/"},"@context":"https://schema.org"}</script><title>Building a Plexus | Node Security</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-RCTP6RS6T4"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-RCTP6RS6T4'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/icon.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Node Security</a></div><div class="site-subtitle font-italic">Security & Programming Guides</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/O1dMate" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['o1dmate','protonmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Building a Plexus</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Building a Plexus</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Alexander Wells </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Apr 16, 2021, 11:53 PM +1100" prep="on" > Apr 16 <i class="unloaded">2021-04-16T23:53:16+11:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sat, May 29, 2021, 4:13 PM +1000" prefix="Updated " > May 29 <i class="unloaded">2021-05-29T17:13:02+11:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1995 words">11 min</span></div></div><div class="post-content"><p>In this post we’ll look at how to build a Plexus in JavaScript using the <a href="https://p5js.org/">p5.js</a> library.</p><ol><li><a href="#what-we-are-making">What we are Making</a><ul><li><a href="#how-we-will-make-it">How we will make it</a></ul><li><a href="#setup-p5js">Setup p5.js</a><li><a href="#points">Points</a><ul><li><a href="#generating-points">Generating Points</a><li><a href="#drawing-points">Drawing Points</a></ul><li><a href="#lines">Lines</a><ul><li><a href="#draw-lines-to-nearby-points">Draw Lines to Nearby Points</a><li><a href="#fading-line-colour">Fading Line Colour</a></ul><li><a href="#moving-points">Moving Points</a><li><a href="#conclusion">Conclusion</a><li><a href="#more-ideas">More Ideas</a><ul><li><a href="#colour-change">Colour Change</a><li><a href="#horizontal-only">Horizontal Only</a><li><a href="#vertical-only">Vertical Only</a><li><a href="#horizontal--vertical">Horizontal &amp; Vertical</a></ul><li><a href="#full-code">Full Code</a></ol><h1 id="what-we-are-making">What we are Making</h1><p>Our goal is to build something that looks like this:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/programming/plexus/plexus-4.png" alt="" /></p><h2 id="how-we-will-make-it">How we will make it</h2><ol><li>Generate random points all over the screen.<li>Draw lines between points that are close to each other. Closer points will have a brighter coloured line.<li>Move the points slightly each frame.<li>Repeat.</ol><p><br /></p><h1 id="setup-p5js">Setup p5.js</h1><p>We’ll start off by setting up our p5.js project. Boilerplate code for p5.js can be found <a href="https://github.com/O1dMate/p5.js-boilerplate">here</a> on my GitHub. Some custom functions are included in this boilerplate to deal with the inverted y-axis when using browsers. These functions make the coordinate (0,0) draw at the bottom-left instead of the top-left.</p><p>We’ll only need to modify the <code class="language-plaintext highlighter-rouge">script.js</code> file inside the boilerplate code.</p><p><br /></p><h1 id="points">Points</h1><h2 id="generating-points">Generating Points</h2><p>Our first step will be to generate a bunch of random points on the screen that will slowly move in a random direction.</p><p>Let’s start off by creating a <code class="language-plaintext highlighter-rouge">Point</code> class:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Point</span> <span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">backgroundSizeX</span><span class="p">,</span> <span class="nx">backgroundSizeY</span><span class="p">,</span> <span class="nx">moveSpeed</span><span class="p">,</span> <span class="nx">pointSize</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">// Store properties</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">moveSpeed</span> <span class="o">=</span> <span class="nx">moveSpeed</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">pointSize</span> <span class="o">=</span> <span class="nx">pointSize</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span> <span class="o">=</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="nx">backgroundSizeX</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">backgroundSizeY</span> <span class="p">};</span>

		<span class="c1">// Generate random starting position</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="p">{</span>
			<span class="na">x</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)),</span>
			<span class="na">y</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
		<span class="p">};</span>

		<span class="c1">// Generate random starting direction</span>
		<span class="kd">let</span> <span class="nx">xDir</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
		<span class="kd">let</span> <span class="nx">yDir</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
		
		<span class="c1">// Convert to a unit vector</span>
		<span class="kd">let</span> <span class="nx">length</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">xDir</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="nx">yDir</span><span class="o">**</span><span class="mi">2</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">direction</span> <span class="o">=</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="nx">xDir</span><span class="o">/</span><span class="nx">length</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">yDir</span><span class="o">/</span><span class="nx">length</span> <span class="p">};</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>In the <code class="language-plaintext highlighter-rouge">setup</code> function of p5.js we’ll now create a bunch of instances of this class. We’ll also need to create an array to store the points, as well as some variables for <code class="language-plaintext highlighter-rouge">MOVE_SPEED</code>, <code class="language-plaintext highlighter-rouge">POINT_SIZE</code>, and <code class="language-plaintext highlighter-rouge">TOTAL_POINTS</code>:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">MOVE_SPEED</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">POINT_SIZE</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">TOTAL_POINTS</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">SCREEN_WIDTH</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">SCREEN_HEIGHT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">POINT_LIST</span> <span class="o">=</span> <span class="p">[];</span>

<span class="c1">// Initial Setup</span>
<span class="kd">function</span> <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">SCREEN_WIDTH</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">-</span> <span class="mi">20</span><span class="p">;</span>
	<span class="nx">SCREEN_HEIGHT</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">-</span> <span class="mi">20</span>

	<span class="nx">createCanvas</span><span class="p">(</span><span class="nx">SCREEN_WIDTH</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="p">);</span>

	<span class="c1">// Create random Points all over the screen</span>
	<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">TOTAL_POINTS</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">POINT_LIST</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">Point</span><span class="p">(</span><span class="nx">SCREEN_WIDTH</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nx">MOVE_SPEED</span><span class="p">,</span> <span class="nx">POINT_SIZE</span><span class="p">));</span>
	<span class="p">}</span>

	<span class="nx">frameRate</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="drawing-points">Drawing Points</h2><p>Now that we have a list of Point objects, we can draw them to the screen. We’ll do this by adding some code to the <code class="language-plaintext highlighter-rouge">draw</code> function that loops over all the points and draws them every frame:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="c1">// To be called each frame</span>
<span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// Draw background &amp; set Rectangle draw mode</span>
	<span class="nx">background</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
	<span class="nx">rectMode</span><span class="p">(</span><span class="nx">CENTER</span><span class="p">);</span>

	<span class="c1">// Draw scene rectangle</span>
	<span class="nx">fill</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
	<span class="nx">stroke</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
	<span class="nx">drawRect</span><span class="p">(</span><span class="nx">SCREEN_WIDTH</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">SCREEN_WIDTH</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="p">)</span>

	<span class="c1">// Draw Points</span>
	<span class="nx">POINT_LIST</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">currentPoint</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="nx">drawPoint</span><span class="p">(</span><span class="nx">currentPoint</span><span class="p">);</span>
	<span class="p">});</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">drawPoint</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pointObject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">stroke</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
	<span class="nx">fill</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
	<span class="nx">drawCircle</span><span class="p">(</span><span class="nx">pointObject</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">pointObject</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">pointObject</span><span class="p">.</span><span class="nx">pointSize</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>If we open the <code class="language-plaintext highlighter-rouge">index.html</code> file, we should see the following:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/programming/plexus/plexus-2.png" alt="" /></p><p><br /></p><h1 id="lines">Lines</h1><h2 id="draw-lines-to-nearby-points">Draw Lines to Nearby Points</h2><p>We want our points to have lines drawn to other nearby points.</p><p>At the top of our code let’s add the following constant:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">DISTANCE_TO_START_DRAWING_LINES</span> <span class="o">=</span> <span class="mi">150</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>2 Points that are further away than this will not have a line between them.<li><strong>NOTE:</strong> you may want to adjust this value based on your screen size.</ul><p><br /></p><p>For each point we need to find all the other points within this radius and draw a line to them.</p><p>We’ll add a function called <code class="language-plaintext highlighter-rouge">drawLineToNearby</code> which will do this for us. This function will be called every frame before each point is drawn.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// Draw background &amp; set Rectangle draw mode</span>
	<span class="nx">background</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
	<span class="nx">rectMode</span><span class="p">(</span><span class="nx">CENTER</span><span class="p">);</span>

	<span class="c1">// Draw scene rectangle</span>
	<span class="nx">fill</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
	<span class="nx">stroke</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
	<span class="nx">drawRect</span><span class="p">(</span><span class="nx">SCREEN_WIDTH</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">SCREEN_WIDTH</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="p">)</span>

	<span class="c1">// Draw Lines to Nearby Points</span>
	<span class="nx">POINT_LIST</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">currentPoint</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="nx">drawLineToNearby</span><span class="p">(</span><span class="nx">currentPoint</span><span class="p">);</span>
	<span class="p">});</span>

	<span class="c1">// Draw Points</span>
	<span class="nx">POINT_LIST</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">currentPoint</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="nx">drawPoint</span><span class="p">(</span><span class="nx">currentPoint</span><span class="p">);</span>
	<span class="p">});</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">drawLineToNearby</span> <span class="o">=</span> <span class="p">(</span><span class="nx">targetPoint</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">stroke</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>

	<span class="nx">POINT_LIST</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">point</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="kd">let</span> <span class="nx">distanceBetween</span> <span class="o">=</span> <span class="nx">distanceBetweenPoints</span><span class="p">(</span><span class="nx">targetPoint</span><span class="p">,</span> <span class="nx">point</span><span class="p">);</span>

		<span class="c1">// Only draw the line if it's close enough</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">distanceBetween</span> <span class="o">&lt;</span> <span class="nx">DISTANCE_TO_START_DRAWING_LINES</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">drawLine</span><span class="p">(</span><span class="nx">targetPoint</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">targetPoint</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">point</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">point</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">})</span>
<span class="p">}</span>

<span class="c1">// Calculate Euclidean distance between 2 points</span>
<span class="kd">const</span> <span class="nx">distanceBetweenPoints</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pointA</span><span class="p">,</span> <span class="nx">pointB</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">pointA</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">pointB</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">pointA</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">pointB</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Here’s what we have so far:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/programming/plexus/plexus-3.png" alt="" /></p><h2 id="fading-line-colour">Fading Line Colour</h2><p>This is looking better, but we want the lines that connect points that are closer together to be brighter.</p><p>We’ll do this by adjusting the Alpha for each line based off the distance. Far away points will be closer to Alpha 0 and nearby points will be closer to Alpha 255.</p><p>We can achieve this using the <code class="language-plaintext highlighter-rouge">map</code> function in p5.js. This function takes 5 arguments and maps an input from one range to another range:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nx">map</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="c1">// returns 3.5</span>
</pre></table></code></div></div><ul><li>50 is halfway between 0 and 100. The output will be the number halfway between 1 and 6, which is 3.5.</ul><p>Here’s the code to implement this in our Plexus:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">drawLineToNearby</span> <span class="o">=</span> <span class="p">(</span><span class="nx">targetPoint</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">POINT_LIST</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">point</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="kd">let</span> <span class="nx">distanceBetween</span> <span class="o">=</span> <span class="nx">distanceBetweenPoints</span><span class="p">(</span><span class="nx">targetPoint</span><span class="p">,</span> <span class="nx">point</span><span class="p">);</span>

		<span class="c1">// Only draw the line if it's close enough</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">distanceBetween</span> <span class="o">&lt;</span> <span class="nx">DISTANCE_TO_START_DRAWING_LINES</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">let</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="nx">map</span><span class="p">(</span><span class="nx">distanceBetween</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">DISTANCE_TO_START_DRAWING_LINES</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

			<span class="nx">stroke</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>
			<span class="nx">drawLine</span><span class="p">(</span><span class="nx">targetPoint</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">targetPoint</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">point</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">point</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">})</span>
<span class="p">}</span>
</pre></table></code></div></div><p>What we have currently:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/programming/plexus/plexus-1.png" alt="" /></p><h1 id="moving-points">Moving Points</h1><p>As a final touch let’s make the points move around the screen slowly.</p><p>We’ll do this by adding an <code class="language-plaintext highlighter-rouge">update</code> function to our <code class="language-plaintext highlighter-rouge">Point</code> class that will be called every frame. This will change the points position over time.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Point</span> <span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">backgroundSizeX</span><span class="p">,</span> <span class="nx">backgroundSizeY</span><span class="p">,</span> <span class="nx">moveSpeed</span><span class="p">,</span> <span class="nx">pointSize</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">// Store properties</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">moveSpeed</span> <span class="o">=</span> <span class="nx">moveSpeed</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">pointSize</span> <span class="o">=</span> <span class="nx">pointSize</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span> <span class="o">=</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="nx">backgroundSizeX</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">backgroundSizeY</span> <span class="p">};</span>

		<span class="c1">// Generate random starting position</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="p">{</span>
			<span class="na">x</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)),</span>
			<span class="na">y</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
		<span class="p">};</span>

		<span class="c1">// Generate random starting direction</span>
		<span class="kd">let</span> <span class="nx">xDir</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
		<span class="kd">let</span> <span class="nx">yDir</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
		
		<span class="c1">// Convert to a unit vector</span>
		<span class="kd">let</span> <span class="nx">length</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">xDir</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="nx">yDir</span><span class="o">**</span><span class="mi">2</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">direction</span> <span class="o">=</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="nx">xDir</span><span class="o">/</span><span class="nx">length</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">yDir</span><span class="o">/</span><span class="nx">length</span> <span class="p">};</span>
	<span class="p">}</span>

	<span class="nx">update</span><span class="p">()</span> <span class="p">{</span>
		<span class="c1">// Update the position of the object</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">moveSpeed</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">moveSpeed</span><span class="p">;</span>

		<span class="c1">// Handle going off the left &amp; right sides of the screen</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span><span class="p">.</span><span class="nx">x</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>

		<span class="c1">// Handle going off the top and bottom sides of the screen</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span><span class="p">.</span><span class="nx">y</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>We’ll call this <code class="language-plaintext highlighter-rouge">update</code> function every frame after we have drawn all the points:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// Draw background &amp; set Rectangle draw mode</span>
	<span class="nx">background</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
	<span class="nx">rectMode</span><span class="p">(</span><span class="nx">CENTER</span><span class="p">);</span>

	<span class="c1">// Draw scene rectangle</span>
	<span class="nx">fill</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
	<span class="nx">stroke</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
	<span class="nx">drawRect</span><span class="p">(</span><span class="nx">SCREEN_WIDTH</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">SCREEN_WIDTH</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="p">)</span>

	<span class="c1">// Draw Lines to Nearby Points</span>
	<span class="nx">POINT_LIST</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">currentPoint</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="nx">drawLineToNearby</span><span class="p">(</span><span class="nx">currentPoint</span><span class="p">);</span>
	<span class="p">});</span>

	<span class="c1">// Draw Points &amp; Update their positions</span>
	<span class="nx">POINT_LIST</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">currentPoint</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="nx">drawPoint</span><span class="p">(</span><span class="nx">currentPoint</span><span class="p">);</span>
		<span class="nx">currentPoint</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
	<span class="p">});</span>
<span class="p">}</span>
</pre></table></code></div></div><h1 id="conclusion">Conclusion</h1><ul><li>We now have an animated 2D plexus effect!<li>I encourage you to play around with the <code class="language-plaintext highlighter-rouge">MOVE_SPEED</code>, <code class="language-plaintext highlighter-rouge">POINT_SIZE</code>, <code class="language-plaintext highlighter-rouge">DISTANCE_TO_START_DRAWING_LINES</code> and <code class="language-plaintext highlighter-rouge">TOTAL_POINTS</code> variables as well as the <code class="language-plaintext highlighter-rouge">drawLineToNearby</code> function to see what you like best.</ul><h1 id="more-ideas">More Ideas</h1><h2 id="colour-change">Colour Change</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/programming/plexus/plexus-4.png" alt="" /></p><ul><li>Demo available <a href="https://node-security.com/Plexus/">here</a><li>This effect is done by changing the colour hue based off the x-coordinate using the <code class="language-plaintext highlighter-rouge">map</code> function. Full code below.</ul><h2 id="horizontal-only">Horizontal Only</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/programming/plexus/plexus-5.png" alt="" /></p><ul><li>Demo available <a href="https://node-security.com/Plexus/#2">here</a></ul><h2 id="vertical-only">Vertical Only</h2><h4 id="example-1">Example 1</h4><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/programming/plexus/plexus-6.png" alt="" /></p><ul><li>Demo available <a href="https://node-security.com/Plexus/#1">here</a></ul><h4 id="example-2">Example 2</h4><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/programming/plexus/plexus-7.png" alt="" /></p><h2 id="horizontal--vertical">Horizontal &amp; Vertical</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/programming/plexus/plexus-8.png" alt="" /></p><ul><li>Demo available <a href="https://node-security.com/Plexus/#3">here</a></ul><p><br /></p><h1 id="full-code">Full Code</h1><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">MOVE_SPEED</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">POINT_SIZE</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">DISTANCE_TO_START_DRAWING_LINES</span> <span class="o">=</span> <span class="mi">150</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">TOTAL_POINTS</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">SCREEN_WIDTH</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">SCREEN_HEIGHT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">POINT_LIST</span> <span class="o">=</span> <span class="p">[];</span>

<span class="c1">// Drawing functions to handled inverted Y-Axis of the browser</span>
<span class="kd">const</span> <span class="nx">drawRect</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">w</span><span class="p">,</span> <span class="nx">h</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">rect</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="o">-</span><span class="nx">y</span><span class="p">,</span> <span class="nx">w</span><span class="p">,</span> <span class="nx">h</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">drawLine</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">line</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="o">-</span><span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="o">-</span><span class="nx">y2</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">drawCircle</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="o">-</span><span class="nx">y</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">drawArc</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">w</span><span class="p">,</span> <span class="nx">h</span><span class="p">,</span> <span class="nx">startAngle</span><span class="p">,</span> <span class="nx">stopAngle</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="o">-</span><span class="nx">y</span><span class="p">,</span> <span class="nx">w</span><span class="p">,</span> <span class="nx">h</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">-</span><span class="nx">stopAngle</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">-</span><span class="nx">startAngle</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">drawTri</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">,</span> <span class="nx">x3</span><span class="p">,</span> <span class="nx">y3</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">triangle</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="o">-</span><span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="o">-</span><span class="nx">y2</span><span class="p">,</span> <span class="nx">x3</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="o">-</span><span class="nx">y3</span><span class="p">);</span>

<span class="c1">// Initial Setup</span>
<span class="kd">function</span> <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">SCREEN_WIDTH</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">-</span> <span class="mi">20</span><span class="p">;</span>
	<span class="nx">SCREEN_HEIGHT</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">-</span> <span class="mi">20</span>

	<span class="nx">createCanvas</span><span class="p">(</span><span class="nx">SCREEN_WIDTH</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="p">);</span>

	<span class="c1">// Create random Points all over the screen</span>
	<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">TOTAL_POINTS</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">POINT_LIST</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">Point</span><span class="p">(</span><span class="nx">SCREEN_WIDTH</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nx">MOVE_SPEED</span><span class="p">,</span> <span class="nx">POINT_SIZE</span><span class="p">));</span>
	<span class="p">}</span>

	<span class="nx">frameRate</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// Draw background &amp; set Rectangle draw mode</span>
	<span class="nx">background</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
	<span class="nx">rectMode</span><span class="p">(</span><span class="nx">CENTER</span><span class="p">);</span>

	<span class="c1">// Draw scene rectangle</span>
	<span class="nx">fill</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
	<span class="nx">stroke</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
	<span class="nx">drawRect</span><span class="p">(</span><span class="nx">SCREEN_WIDTH</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">SCREEN_WIDTH</span><span class="p">,</span> <span class="nx">SCREEN_HEIGHT</span><span class="p">)</span>

	<span class="c1">// Draw Lines to Nearby Points</span>
	<span class="nx">POINT_LIST</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">currentPoint</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="nx">drawLineToNearby</span><span class="p">(</span><span class="nx">currentPoint</span><span class="p">);</span>
	<span class="p">});</span>

	<span class="c1">// Draw Points &amp; Update their positions</span>
	<span class="nx">POINT_LIST</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">currentPoint</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="nx">drawPoint</span><span class="p">(</span><span class="nx">currentPoint</span><span class="p">);</span>
		<span class="nx">currentPoint</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
	<span class="p">});</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">drawPoint</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pointObject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">stroke</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
	<span class="nx">fill</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
	<span class="nx">drawCircle</span><span class="p">(</span><span class="nx">pointObject</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">pointObject</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">pointObject</span><span class="p">.</span><span class="nx">pointSize</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">drawLineToNearby</span> <span class="o">=</span> <span class="p">(</span><span class="nx">targetPoint</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">colorMode</span><span class="p">(</span><span class="nx">HSB</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>

	<span class="nx">POINT_LIST</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">point</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="kd">let</span> <span class="nx">distanceBetween</span> <span class="o">=</span> <span class="nx">distanceBetweenPoints</span><span class="p">(</span><span class="nx">targetPoint</span><span class="p">,</span> <span class="nx">point</span><span class="p">);</span>

		<span class="c1">// Only draw the line if it's close enough</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">distanceBetween</span> <span class="o">&lt;</span> <span class="nx">DISTANCE_TO_START_DRAWING_LINES</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">let</span> <span class="nx">colour</span> <span class="o">=</span> <span class="nx">map</span><span class="p">(</span><span class="nx">targetPoint</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">targetPoint</span><span class="p">.</span><span class="nx">backgroundSize</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
			<span class="kd">let</span> <span class="nx">brightness</span> <span class="o">=</span> <span class="nx">map</span><span class="p">(</span><span class="nx">distanceBetween</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">DISTANCE_TO_START_DRAWING_LINES</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

			<span class="nx">stroke</span><span class="p">(</span><span class="nx">colour</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="nx">brightness</span><span class="p">);</span>
			<span class="nx">drawLine</span><span class="p">(</span><span class="nx">targetPoint</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">targetPoint</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">point</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">point</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">})</span>

	<span class="nx">colorMode</span><span class="p">(</span><span class="nx">RGB</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Calculate Euclidean distance between 2 points</span>
<span class="kd">const</span> <span class="nx">distanceBetweenPoints</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pointA</span><span class="p">,</span> <span class="nx">pointB</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">pointA</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">pointB</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">pointA</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">pointB</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">Point</span> <span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">backgroundSizeX</span><span class="p">,</span> <span class="nx">backgroundSizeY</span><span class="p">,</span> <span class="nx">moveSpeed</span><span class="p">,</span> <span class="nx">pointSize</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">// Store properties</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">moveSpeed</span> <span class="o">=</span> <span class="nx">moveSpeed</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">pointSize</span> <span class="o">=</span> <span class="nx">pointSize</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span> <span class="o">=</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="nx">backgroundSizeX</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">backgroundSizeY</span> <span class="p">};</span>

		<span class="c1">// Generate random starting position</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="p">{</span>
			<span class="na">x</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)),</span>
			<span class="na">y</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
		<span class="p">};</span>

		<span class="c1">// Generate random starting direction</span>
		<span class="kd">let</span> <span class="nx">xDir</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
		<span class="kd">let</span> <span class="nx">yDir</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
		
		<span class="c1">// Convert to a unit vector</span>
		<span class="kd">let</span> <span class="nx">length</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">xDir</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="nx">yDir</span><span class="o">**</span><span class="mi">2</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">direction</span> <span class="o">=</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="nx">xDir</span><span class="o">/</span><span class="nx">length</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">yDir</span><span class="o">/</span><span class="nx">length</span> <span class="p">};</span>
	<span class="p">}</span>

	<span class="nx">update</span><span class="p">()</span> <span class="p">{</span>
		<span class="c1">// Update the position of the object</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">moveSpeed</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">moveSpeed</span><span class="p">;</span>

		<span class="c1">// Handle going off the left &amp; right sides of the screen</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span><span class="p">.</span><span class="nx">x</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>

		<span class="c1">// Handle going off the top and bottom sides of the screen</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">backgroundSize</span><span class="p">.</span><span class="nx">y</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p><br /></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/javascript/'>javascript</a>, <a href='/categories/programming/'>programming</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/javascript/" class="post-tag no-text-decoration" >javascript</a> <a href="/tags/programming/" class="post-tag no-text-decoration" >programming</a> <a href="/tags/p5-js/" class="post-tag no-text-decoration" >p5.js</a> <a href="/tags/algorithm/" class="post-tag no-text-decoration" >algorithm</a> <a href="/tags/plexus/" class="post-tag no-text-decoration" >plexus</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Building a Plexus - Node Security&url=https://node-security.com/posts/building-a-plexus/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Building a Plexus - Node Security&u=https://node-security.com/posts/building-a-plexus/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Building a Plexus - Node Security&url=https://node-security.com/posts/building-a-plexus/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/jwt-fuzzing/">JWT Fuzzing</a><li><a href="/posts/objection-quick-start/">Objection Quick Start</a><li><a href="/posts/javascript-tips-and-tricks-2/">JavaScript Tips & Tricks 2</a><li><a href="/posts/web-app-checklist/">Web App Checklist</a><li><a href="/posts/web-app-security/">Web App Security</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/http/">http</a> <a class="post-tag" href="/tags/https/">https</a> <a class="post-tag" href="/tags/nodejs/">nodejs</a> <a class="post-tag" href="/tags/web/">web</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/cryptography/">cryptography</a> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/express/">express</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/web-workers/"><div class="card-body"> <span class="timeago small" > Apr 29 <i class="unloaded">2021-04-29T18:40:58+11:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Web Workers</h3><div class="text-muted small"><p> This page will demonstrate how to setup Web Workers, dispatch tasks to workers, and send messages/results from workers to the main thread. HTML Page Worker Code Example Output HTML Page ...</p></div></div></a></div><div class="card"> <a href="/posts/filter-and-map/"><div class="card-body"> <span class="timeago small" > May 29 <i class="unloaded">2021-05-29T15:23:46+11:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Filter and Map</h3><div class="text-muted small"><p> In this post we’ll look at how to use the filter and map functions in JavaScript and why you would use them. Filter The Normal Way Using Filter Advanced Filtering ...</p></div></div></a></div><div class="card"> <a href="/posts/creating-xlsx-documents-in-javascript-basic/"><div class="card-body"> <span class="timeago small" > Apr 24 <i class="unloaded">2021-04-24T14:53:16+11:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Creating XLSX Documents in Javascript (Basic)</h3><div class="text-muted small"><p> In this post we’ll look at how to create basic XLSX documents in JavaScript using the xlsx package. This works in both NodeJS and React. What we are Making Installing Requirements The Code ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/javascript-tips-and-tricks/" class="btn btn-outline-primary" prompt="Older"><p>JavaScript Tips & Tricks</p></a> <a href="/posts/creating-xlsx-documents-in-javascript-basic/" class="btn btn-outline-primary" prompt="Newer"><p>Creating XLSX Documents in Javascript (Basic)</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/twitter_username">Alexander Wells</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/http/">http</a> <a class="post-tag" href="/tags/https/">https</a> <a class="post-tag" href="/tags/nodejs/">nodejs</a> <a class="post-tag" href="/tags/web/">web</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/cryptography/">cryptography</a> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/express/">express</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://node-security.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
